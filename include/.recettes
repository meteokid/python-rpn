#
#   Common recipes for models
#
include       $(ATM_MODEL_PATH)/include/Makefile_$(BASE_ARCH)
MODLIBPATH  = $(ATM_MODEL_PATH)
PHY_VERSION = 5.1.0

RCOMPIL = r.compile $(MPI) $(OMP) -includes ./ $(MODLIBPATH)/include $(PHYLIBPATH)/include $(MODLIBPATH)/lib/$(EC_ARCH)/mod $(PHYLIBPATH)/lib/$(EC_ARCH)/mod

COMM     = rpn_comm$(version_COMM) $(COMM_stubs)

V4D         = v4d_stubs
#V4D         = "v4d modulopt prof_003"

PHYLIBPATH  = $(ARMNLIB)/modeles/PHY/v_$(PHY_VERSION)
#PHY         = phy_stubs
PHY         = phy

CHM_VERSION = 0.0
CHMLIBPATH  = $(ARMNLIB)/modeles/CHM/v_$(CHM_VERSION)
CHM         = chm_stubs
#CHM         = chm

CPL_VERSION = 106
CPL = cpl_$(CPL_VERSION)
CPLLIBPATH = /users/dor/armn/mod/cpl/v_$(CPL_VERSION)
#CPL         = cpl_stubs

OTHERS   = $(COMM) $(UTIL) $(LLAPI) $(IBM_LD)
LIBPATH  = $(PWD) $(MODLIBPATH)/lib/$(EC_ARCH) $(PHYLIBPATH)/lib/$(EC_ARCH) $(CHMLIBPATH)/lib/$(EC_ARCH) $(CPLLIBPATH)/lib/$(EC_ARCH)
LIBS     = $(ATM_MODEL) $(V4D) $(PHY) $(PATCH) $(CHM) $(CPL) $(OTHERS)

LCLPO   = malib$(EC_ARCH)
mainntr = main$(ATM_MODEL)ntr_$(BASE_ARCH)_${ATM_MODEL_VERSION}.Abs
maindm  = main$(ATM_MODEL)dm_$(BASE_ARCH)_${ATM_MODEL_VERSION}.Abs
rmpo:
	/bin/rm -f $(LCLPO)/*.o
#
libdyn: rmpo $(OBJECTS)
#
out_vref_mod.o: out_vref_mod.cdk90      cstv.cdk        dimout.cdk      	glb_ld.cdk \
		grd.cdk         	grid.cdk        grid_descriptors.o	level.cdk  \
        	lun.cdk        		 out.cdk    	type.cdk        	ver.cdk
