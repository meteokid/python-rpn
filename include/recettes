#
#   Common recipes for models
#
.SILENT :
include       $(modelutils)/include/recettes
include       $(gemdyn)/include/build_components

COMM     = rpn_comm$(COMM_VERSION) $(COMM_stubs)

V4D         = v4d_stubs
#V4D         = "gemdyn_v4d modulopt prof_003"

#PHYLIBPATH  = $(ARMNLIB)/modeles/PHY/v_$(PHY_VERSION)
#PHY         = phy_stubs
PHY         = rpnphy

VGRID         = descrip

MODULOPT      = modulopt_stubs
#PROF          = prof_003
PROF          = prof_stubs

CHMLIBPATH  = $(ARMNLIB)/modeles/CHM/v_$(CHM_VERSION)
CHM         = chm_stubs
#CHM         = chm

CPL = cpl_$(CPL_VERSION)
CPLLIBPATH = /users/dor/armn/mod/cpl/v_$(CPL_VERSION)
#CPL         = cpl_stubs

OTHERS   = $(COMM) $(VGRID) $(UTIL) $(LLAPI) $(IBM_LD)
#LIBPATH  = $(PWD) $(MODLIBPATH)/lib/$(EC_ARCH) $(PHYLIBPATH)/lib/$(EC_ARCH) $(CHMLIBPATH)/lib/$(EC_ARCH) $(CPLLIBPATH)/lib/$(EC_ARCH)
LIBPATH  = $(PWD) $(LIBPATHEXTRA) $(CHMLIBPATH)/lib/$(EC_ARCH) $(CPLLIBPATH)/lib/$(EC_ARCH)
LIBS     = gemdyn $(V4D) $(PHY) $(PATCH) $(CPL) modelutils $(OTHERS)

mainntr = maingemntr_$(BASE_ARCH).Abs
maindm  = maingemdm_$(BASE_ARCH).Abs

libdyn: rmpo $(OBJECTS)

out_vref_mod.o: out_vref_mod.cdk90      cstv.cdk     dimout.cdk   glb_ld.cdk \
                grd.cdk                 grid.cdk     level.cdk    lun.cdk    \
                                         out.cdk     type.cdk     ver.cdk

nest_blending.o: nest_blending.cdk90   glb_ld.cdk var_gmm.cdk nest.cdk
