#
#   Common recipes for models
#
.SILENT :
include       $(modelutils)/include/recettes
include       $(gemdyn)/include/build_components

COMM     = rpn_comm$(COMM_VERSION) $(COMM_stubs)

V4D         = v4d_stubs
#V4D         = "gemdyn_v4d modulopt prof_003"

CHMLIBPATH  = 
CHM         = $(CHM_VERSION)
#CHMLIBPATH  = $(ARMNLIB)/modeles/CHM/v_$(CHM_VERSION)
#CHM         = chm

#PHY         = rpnphy_stubs
PHY         = rpnphy

VGRID         = descrip

MODULOPT      = modulopt_stubs
PROF          = prof_003
#PROFLIBPATH   = $(ARMNLIB)/lib/$(BASE_ARCH)
PROFLIBPATH   =
#PROF          = prof_stubs


CPL = cpl_$(CPL_VERSION)
CPLLIBPATH = /users/dor/armn/mod/cpl/v_$(CPL_VERSION)
#CPL         = cpl_stubs

OTHERS   = $(COMM) $(VGRID) $(UTIL) $(LLAPI) $(IBM_LD)
LIBPATH  = $(PWD) $(LIBPATHEXTRA) $(CHMLIBPATH)/lib/$(EC_ARCH) $(CPLLIBPATH)/lib/$(EC_ARCH) $(PROFLIBPATH)

LIBS     = gemdyn $(V4D) $(PHY) $(CHM) $(PATCH) $(CPL) modelutils $(OTHERS)

mainntr = maingemntr_$(BASE_ARCH).Abs
maindm  = maingemdm_$(BASE_ARCH).Abs

libdyn: rmpo $(OBJECTS)

out_vref_mod.o: out_vref_mod.cdk90      cstv.cdk     dimout.cdk   glb_ld.cdk \
                grd.cdk                 grid.cdk     level.cdk    lun.cdk    \
                                         out.cdk     type.cdk     ver.cdk

nest_blending.o: nest_blending.cdk90   glb_ld.cdk nest.cdk
nest_blending_ad.o: nest_blending_ad.cdk90   glb_ld.cdk nest.cdk
