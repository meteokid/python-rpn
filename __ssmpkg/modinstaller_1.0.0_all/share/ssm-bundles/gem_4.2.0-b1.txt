#!/bin/ksh
modinstaller_file_version=4

ssm_arch_list="Linux_x86-64:linux26-x86-64 Linux:linux26-i686 AIX:aix53-ppc-64"

ssm_bndl_subdir=GEM
ssm_bndl_name=4.2.0-b1
ssm_bndl_isexperimental=1

ssm_dyn_v=4.2.0-b1
ssm_dyn_x='x/'
ssm_phy_v=5.1.3
ssm_phy_x='' #'x/'
ssm_scripts_v=$ssm_dyn_v
ssm_scripts_x=$ssm_dyn_x

ssm_bndl_externals='Linux_x86-64:pgi9xx-old  Linux_x86-64:mpich2 Linux:pgi9xx-old  Linux:mpich2 AIX:Xlf12 rmnlib-dev GEM/vgriddescriptors/1.0.8'
ssm_bndl_externals_post='GEM/gem-home-path'

ssm_bndl_x=''
if [[ x$ssm_bndl_isexperimental == x1 ]] ; then
	 ssm_bndl_x='x/'						  
fi
export ssm_bndl_x

ssm_multiarch() {
	 for _arch in $ssm_arch_list ; do
		  _arch1=$(echo ${_arch} | cut -d":" -f1)
		  _arch2=$(echo ${_arch} | cut -d":" -f2)
		  echo "${_arch1}:$1 " | sed "s/SSMARCH/${_arch2}/"
	 done
}

ssm_bndl_install_list="\
 gem_V999V_all|gem_${ssm_bndl_name}_all@${ssm_bndl_x}gem_${ssm_bndl_name}\
 \
 gem-data_4.0.1_all@gem-data_4.0.1\
 \
 $(ssm_multiarch modulopt_2.1c_SSMARCH@modulopt_2.1c)\
 \
 domconfig_1.0.0_all@${ssm_scripts_x}gem-scripts_${ssm_scripts_v}\
 gem-scripts_V999V_all|gem-scripts_${ssm_scripts_v}_all@${ssm_scripts_x}gem-scripts_${ssm_scripts_v}\
 \
 domconfig_1.0.0_all@${ssm_dyn_x}gemdyn_${ssm_dyn_v}\
 gemdyn_V999V_all|gemdyn_${ssm_dyn_v}_all@${ssm_dyn_x}gemdyn_${ssm_dyn_v}\
 \
 domconfig_1.0.0_all@${ssm_phy_x}rpnphy_${ssm_phy_v}\
 rpnphy_V999V_all|rpnphy_${ssm_phy_v}_all@${ssm_phy_x}rpnphy_${ssm_phy_v}\
 \
 $(ssm_multiarch "rpnphy_V999V_ARCH|rpnphy_${ssm_phy_v}_SSMARCH@${ssm_phy_x}rpnphy_${ssm_phy_v}")\
 \
 $(ssm_multiarch "gemdyn_V999V_ARCH|gemdyn_${ssm_dyn_v}_SSMARCH@${ssm_dyn_x}gemdyn_${ssm_dyn_v}")\
 \
 $(ssm_multiarch "gembin_V999V_ARCH|gembin_${ssm_bndl_name}_SSMARCH@${ssm_bndl_x}gem_${ssm_bndl_name}")\
"
